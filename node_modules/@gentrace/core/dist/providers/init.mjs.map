{"version":3,"file":"init.mjs","sources":["init.js"],"sourcesContent":["import { Configuration as Configuration } from \"../configuration\";\nimport { CoreApi } from \"../api\";\nimport { getProcessEnv } from \"./utils\";\nexport let GENTRACE_API_KEY = \"\";\nexport let GENTRACE_BASE_PATH = \"\";\nexport let GENTRACE_BRANCH = \"\";\nexport let GENTRACE_COMMIT = \"\";\nexport let GENTRACE_RUN_NAME = \"\";\nexport let globalGentraceConfig = null;\nexport let globalGentraceApi = null;\nexport let resetGlobalGentraceApi = () => {\n    globalGentraceConfig = null;\n};\nexport function init(values) {\n    const { apiKey, basePath, branch, commit, runName } = values !== null && values !== void 0 ? values : {};\n    if (!apiKey && !getProcessEnv(\"GENTRACE_API_KEY\")) {\n        throw new Error(\"Gentrace API key was provided neither by the `apiKey` param in the constructor nor by the `GENTRACE_API_KEY` env variable.\");\n    }\n    GENTRACE_API_KEY = apiKey || getProcessEnv(\"GENTRACE_API_KEY\");\n    GENTRACE_RUN_NAME = runName || getProcessEnv(\"GENTRACE_RUN_NAME\");\n    if (basePath) {\n        try {\n            const url = new URL(basePath);\n            if (url.pathname.startsWith(\"/api/v1\")) {\n            }\n            else {\n                throw new Error('Gentrace base path must end in \"/api/v1\".');\n            }\n        }\n        catch (err) {\n            throw new Error(`Invalid Gentrace base path: ${err.message}`);\n        }\n        GENTRACE_BASE_PATH = basePath;\n    }\n    globalGentraceConfig = new Configuration({\n        apiKey: GENTRACE_API_KEY,\n        basePath: GENTRACE_BASE_PATH,\n    });\n    globalGentraceApi = new CoreApi(globalGentraceConfig);\n    if (branch) {\n        GENTRACE_BRANCH = branch;\n    }\n    if (commit) {\n        GENTRACE_COMMIT = commit;\n    }\n}\nexport function deinit() {\n    GENTRACE_API_KEY = \"\";\n    GENTRACE_BASE_PATH = \"\";\n    GENTRACE_BRANCH = \"\";\n    GENTRACE_COMMIT = \"\";\n    globalGentraceConfig = null;\n    globalGentraceApi = null;\n}\n"],"names":[],"mappings":";;;;AAGU,IAAC,gBAAgB,GAAG,GAAG;AACvB,IAAC,kBAAkB,GAAG,GAAG;AACzB,IAAC,eAAe,GAAG,GAAG;AACtB,IAAC,eAAe,GAAG,GAAG;AACtB,IAAC,iBAAiB,GAAG,GAAG;AACxB,IAAC,oBAAoB,GAAG,KAAK;AAC7B,IAAC,iBAAiB,GAAG,KAAK;AAC1B,IAAC,sBAAsB,GAAG,MAAM;AAC1C,IAAI,oBAAoB,GAAG,IAAI,CAAC;AAChC,EAAE;AACK,SAAS,IAAI,CAAC,MAAM,EAAE;AAC7B,IAAI,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,KAAK,IAAI,IAAI,MAAM,KAAK,KAAK,CAAC,GAAG,MAAM,GAAG,EAAE,CAAC;AAC7G,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,aAAa,CAAC,kBAAkB,CAAC,EAAE;AACvD,QAAQ,MAAM,IAAI,KAAK,CAAC,4HAA4H,CAAC,CAAC;AACtJ,KAAK;AACL,IAAI,gBAAgB,GAAG,MAAM,IAAI,aAAa,CAAC,kBAAkB,CAAC,CAAC;AACnE,IAAI,iBAAiB,GAAG,OAAO,IAAI,aAAa,CAAC,mBAAmB,CAAC,CAAC;AACtE,IAAI,IAAI,QAAQ,EAAE;AAClB,QAAQ,IAAI;AACZ,YAAY,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,QAAQ,CAAC,CAAC;AAC1C,YAAY,IAAI,GAAG,CAAC,QAAQ,CAAC,UAAU,CAAC,SAAS,CAAC,EAAE;AACpD,aAAa;AACb,iBAAiB;AACjB,gBAAgB,MAAM,IAAI,KAAK,CAAC,2CAA2C,CAAC,CAAC;AAC7E,aAAa;AACb,SAAS;AACT,QAAQ,OAAO,GAAG,EAAE;AACpB,YAAY,MAAM,IAAI,KAAK,CAAC,CAAC,4BAA4B,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;AAC1E,SAAS;AACT,QAAQ,kBAAkB,GAAG,QAAQ,CAAC;AACtC,KAAK;AACL,IAAI,oBAAoB,GAAG,IAAI,aAAa,CAAC;AAC7C,QAAQ,MAAM,EAAE,gBAAgB;AAChC,QAAQ,QAAQ,EAAE,kBAAkB;AACpC,KAAK,CAAC,CAAC;AACP,IAAI,iBAAiB,GAAG,IAAI,OAAO,CAAC,oBAAoB,CAAC,CAAC;AAC1D,IAAI,IAAI,MAAM,EAAE;AAChB,QAAQ,eAAe,GAAG,MAAM,CAAC;AACjC,KAAK;AACL,IAAI,IAAI,MAAM,EAAE;AAChB,QAAQ,eAAe,GAAG,MAAM,CAAC;AACjC,KAAK;AACL,CAAC;AACM,SAAS,MAAM,GAAG;AACzB,IAAI,gBAAgB,GAAG,EAAE,CAAC;AAC1B,IAAI,kBAAkB,GAAG,EAAE,CAAC;AAC5B,IAAI,eAAe,GAAG,EAAE,CAAC;AACzB,IAAI,eAAe,GAAG,EAAE,CAAC;AACzB,IAAI,oBAAoB,GAAG,IAAI,CAAC;AAChC,IAAI,iBAAiB,GAAG,IAAI,CAAC;AAC7B;;;;"}